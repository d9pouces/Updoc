{% extends "tpl_main.html" %}{% load staticfiles %}{% load url from future %}{% load i18n %}{% load updoc %}{% load bootstrap3 %}
{% block body %}
    <div class="row">
    <div class="col-lg-2 col-md-3 hidden-xs hidden-sm">
        <h2>{% trans 'Properties' %}</h2>

        <p>
        <ul class="list-unstyled">
            {% if doc.user %}
                <li><p>{% trans 'Uploaded by:' %} {{ doc.user }}</p></li>

            {% endif %}
            <li><p>{{ doc.upload_time|date:"SHORT_DATETIME_FORMAT" }}</p></li>
            <li>
                <p>
                    <small><a
                            href="{% url 'updoc.views.show_doc_alt' doc_id=doc.id path='' %}">{% trans 'Alternative link (no authentication)' %}</a>
                    </small>
                </p>
            </li>
            <li>
                <p><a class="btn btn-lg btn-primary" role="button"
                      href="{% url 'updoc.views.compress_archive' doc_id=doc.id fmt='zip' %}">
                    {% bootstrap_icon "cloud-download" %} {% trans 'Download as ZIP' %}
                </a></p>
            </li>
            {% if editable %}
                <li>
                    <p><a class="btn btn-lg btn-danger" role="button"
                          onclick="return confirm('{% trans 'Delete this file?' %}');"
                          href="{% url 'updoc.views.delete_doc' doc_id=doc.id %}">
                        {% bootstrap_icon "trash" %} {% trans 'Delete' %}
                    </a></p>
                </li>
            {% endif %}
        </ul>
        </p>
    </div>
    <div class="col-lg-10 col-md-9 col-xs-12 col-sm-12">
        <h2>{% trans 'Document:' %}
                        <span {% if editable %}contenteditable="true"
                              title="{% trans 'Click here to edit the title, ESC to validate.' %}"
                              onblur="edit_title({{ doc.id }}, this);"{% endif %}>{{ doc }}
                                {% if editable and not doc.name %}{% trans 'Click to edit title' %}{% endif %}</span>
            <img class="hidden" id="loading_title" src="{% static 'images/ajax-loader.gif' %}"
                 alt="{% trans 'loading…' %}"/>
        </h2>

        <div>
            <h4>
                {% trans 'Keywords:' %}
                <small {% if editable %}contenteditable="true"
                       title="{% trans 'Click here to edit keywords, ESC to validate.' %}"
                       onblur="edit_keywords({{ doc.id }}, this);"{% endif %} style="width: 100%;">
                    {{ keywords }}{% if editable and not keywords %}
                        {% trans 'Click to add keywords' %}{% endif %}</small>
                <img class="hidden" id="loading_keywords" src="{% static 'images/ajax-loader.gif' %}"
                     alt="{% trans 'loading…' %}"/>
            </h4>
            {% if directory %}
                <div class="panel panel-default">
                <div class="panel-heading">
                    <ol class="breadcrumb" style="margin-bottom: 0; ">{% for p in directory.titles %}
                        {% if forloop.last %}
                            <li class="active">{{ p.1 }}</li>{% else %}
                            <li><a href="{{ p.0 }}">{{ p.1 }}</a></li>{% endif %}{% endfor %}
                    </ol>
                </div>
                <div class="panel-body">
                    <table class="table">
                        <tr>
                            <th style="width: 3em">&nbsp;</th>
                            <th>{% trans 'Name' %}</th>
                            <th style="width: 7em">{% trans 'Size' %}</th>
                            <th style="width: 12em" class="hidden-xs">{% trans 'Modified on' %}</th>
                        </tr>
                        {% for element in directory.elements %}
                            <tr class="{% cycle 'row1' 'row2' %}">
                                <td><img class="large-icon" src="{% static element.icon %}" alt=""/></td>
                                <td><a href="{{ element.url }}">{{ element.name }}</a></td>
                                <td class="details">{{ element.size|si_unit:"B" }}</td>
                                <td class="details hidden-xs">{% if element.date %}
                                    {{ element.date|date:"SHORT_DATETIME_FORMAT" }}
                                {% endif %}</td>
                            </tr>
                        {% endfor %}
                    </table>
                </div>
            {% endif %}
            </div>
        </div>
    </div>
    </div>
{% endblock %}
